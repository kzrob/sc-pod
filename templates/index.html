<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Data Viewer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
	<h1>Data Viewer</h1>
	<p>Works for Jubope. Did not test CYR.</p>

	<!-- Upload form -->
	<div id="upload-area">
		<form id="uploadForm">
			<input id="uploadFile" type="file" accept=".txt,.tsv,text/plain" />
			<button id="uploadBtn" type="submit">Upload TSV</button>
			<span id="uploadStatus" style="margin-left:8px"></span>
		</form>
	</div>
	
	<!-- Data table -->
	
	{% if data is none %}
		<p>No data available. Please upload a TSV file.</p>
	{% else %}
		{% set cols = data[0].keys() %}
		<form method="post">
			{% for c in cols %}
			<div>
				<input checked type="checkbox" id="col-{{ loop.index0 }}" class="col-toggle" data-index="{{ loop.index0 }}">
				<label for="col-{{ loop.index0 }}">{{ c }}</label>
			</div>
			{% endfor %}
		</form>
		<table id="dataTable">
			<thead>
				<tr>
					{% for c in cols %}
						<th>{{ c }}</th>
					{% endfor %}
					<th>Image</th>
				</tr>
			</thead>
			<tbody>
				{% for row in data %}
				<tr>
					{% for c in cols %}
						{% if c == "logo-id" and row[c].isdigit() %}
							<td><img src="files/Jubope/{{ row[c] }}.png"></td>
						{% elif c == "logo-id" and row[c][1:].isdigit() %}
							<td><img src="files/Jubope/{{ row[c][1:] }}.png"></td>
						{% else %}
							<td>{{ row[c] }}</td>
						{% endif %}
					{% endfor %}
					<td><img src="files/{{ row['order-item-id'] }}/.jpg" alt="Image"></td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	{% endif %}

	<script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>